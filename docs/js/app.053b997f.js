(function(e){function t(t){for(var r,s,i=t[0],c=t[1],l=t[2],d=0,p=[];d<i.length;d++)s=i[d],o[s]&&p.push(o[s][0]),o[s]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);u&&u(t);while(p.length)p.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,i=1;i<n.length;i++){var c=n[i];0!==o[c]&&(r=!1)}r&&(a.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},o={app:0},a=[];function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/thebroom/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var u=c;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"02cc":function(e,t,n){},2856:function(e,t,n){},"41a0d":function(e,t,n){"use strict";var r=n("ebde"),o=n.n(r);o.a},4449:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("097d");var r=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("TheGameArea"),n("Menu"),n("ThePlayButton"),n("TheCards"),n("Results")],1)},a=[],s=n("c93e"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"game-area-background",class:{mobile:"smartphone"===e.device}},[n("div",{staticClass:"game-area-background-decoration",class:{mobile:"smartphone"===e.device}}),e._l([0,1,2],function(e){return n("CardPositionMark",{key:e+999,attrs:{positionIndex:e,position:"dealer"}})}),e._l([0,1,2],function(e){return n("CardPositionMark",{key:e+99,attrs:{positionIndex:e,position:"player"}})})],2)},c=[],l=n("2f62"),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"card-position-mark",class:{mobile:e.isMobile&&e.isDealer},style:e.positionStyle})},d=[],p=(n("c5f6"),{name:"CardPositionMark",props:{positionIndex:{type:Number,required:!0},position:{type:String,required:!0}},computed:Object(s["a"])({},Object(l["b"])(["device"]),{isMobile:function(){return"smartphone"===this.device},isDealer:function(){return"dealer"===this.position},positionStyle:function(){return this.isMobile&&this.isDealer?{top:"calc(".concat(this.positions[this.position].top,"% - 4.5rem)"),left:"calc(".concat(this.positions[this.position].left,"% - ").concat(8.6-7*.8*this.positionIndex,"rem)")}:{top:"calc(".concat(this.positions[this.position].top,"% - 4.5rem)"),left:"calc(".concat(this.positions[this.position].left,"% - ").concat(10-7*this.positionIndex,"rem)")}}}),created:function(){var e={deck:{top:50,left:-40},common:{top:50,left:50},dealer:{top:10,left:50},dealerDeck:{top:20,left:-40},player:{top:70,left:50},playerDeck:{top:80,left:140}};window.innerWidth<500&&(this.positions=e)},data:function(){return{positions:{deck:{top:20,left:5},common:{top:50,left:50},dealer:{top:20,left:50},dealerDeck:{top:20,left:80},player:{top:80,left:50},playerDeck:{top:80,left:80}}}}}),f=p,h=(n("41a0d"),n("2877")),m=Object(h["a"])(f,u,d,!1,null,null,null);m.options.__file="CardPositionMark.vue";var v=m.exports,y={name:"TheGameArea",props:{},computed:Object(s["a"])({},Object(l["b"])(["results","round","deal","device"])),components:{CardPositionMark:v}},C=y,b=(n("8016"),Object(h["a"])(C,i,c,!1,null,null,null));b.options.__file="TheGameArea.vue";var g=b.exports,k=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"the-cards"},e._l(e.deck,function(e,t){return n("Card",{key:t,attrs:{card:e}})}))},w=[],_=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"card",class:{selected:e.card.selected,mobile:"smartphone"===e.device&&"player"!==e.card.player},style:e.cardStyle},[n("div",{staticClass:"card-front",class:{"face-down":e.card.facedDown,selected:e.card.selected},on:{click:e.moveCard}},[n("span",{class:"card-value "+e.suitColor+"-color"},[e._v("\n\t\t\t\t"+e._s(e.card.value)+"\n\t\t\t")])]),n("div",{staticClass:"card-back",class:{"face-down":e.card.facedDown}},[n("div",{staticClass:"card-back-design"}),n("div",{staticClass:"card-back-corners-top"}),n("div",{staticClass:"card-back-corners-bottom"})])])},T=[],D=(n("6762"),{name:"Card",props:{card:{type:Object,required:!0}},computed:Object(s["a"])({},Object(l["b"])(["playerCards","dealerCards","commonCards","device"]),{suitColor:function(){var e={heart:"red",sword:"blue",gold:"yellow",wood:"green"};return e[this.card.suit]},playersCards:function(){return this.playerCards.length+this.dealerCards.length},commonCardsInitialPosition:function(){return this.isSmartphone?this.commonCards.length>4?this.card.positionIndex<4?11.4:.8*((this.commonCards.length-4)/2*6+(this.commonCards.length-4-1)/2)+.6:.8*(this.commonCards.length/2*6+(this.commonCards.length-1)/2)+.6:this.commonCards.length/2*6+(this.commonCards.length-1)/2},positionLeftGap:function(){var e={dealerDeck:0,playerDeck:0,deck:3,common:this.commonCardsInitialPosition,dealer:"smartphone"===this.device?8.6:10,player:10};return e[this.card.position]},gapBetweenCards:function(){var e=["dealer","player","common"];return"smartphone"===this.device?"player"===this.card.position?7:"dealer"===this.card.position||"common"===this.card.position?7*.8:.1:e.includes(this.card.position)?7:.1},isSmartphone:function(){return"smartphone"===this.device},isCommon:function(){return"common"===this.card.position},cardStyle:function(){if(this.isSmartphone&&this.isCommon){var e=this.card.positionIndex;return e>3?(e-=4,{top:"calc(".concat(this.positions[this.card.position].top,"% + 3.5rem)"),left:"calc(".concat(this.positions[this.card.position].left,"% - ").concat(this.positionLeftGap-this.gapBetweenCards*e,"rem)"),zIndex:e}):{top:"calc(".concat(this.positions[this.card.position].top,"% - 4.5rem)"),left:"calc(".concat(this.positions[this.card.position].left,"% - ").concat(this.positionLeftGap-this.gapBetweenCards*this.card.positionIndex,"rem)"),zIndex:this.card.positionIndex}}return{top:"calc(".concat(this.positions[this.card.position].top,"% - 4.5rem)"),left:"calc(".concat(this.positions[this.card.position].left,"% - ").concat(this.positionLeftGap-this.gapBetweenCards*this.card.positionIndex,"rem)"),zIndex:this.card.positionIndex}}}),watch:{commonCards:function(e){"common"===this.card.player&&this.isSmartphone&&(e.length>4?this.positions.common.top=30:this.positions.common.top=40)},device:function(e){var t={deck:{top:50,left:-40},common:{top:40,left:50},dealer:{top:10,left:50},dealerDeck:{top:10,left:-40},player:{top:70,left:50},playerDeck:{top:70,left:140}},n={deck:{top:50,left:10},common:{top:50,left:50},dealer:{top:20,left:50},dealerDeck:{top:20,left:20},player:{top:80,left:50},playerDeck:{top:80,left:80}};"smartphone"===e?(console.log("smartphone"),this.positions=t):this.positions=n}},methods:{moveCard:function(){this.card.selected?this.$store.commit("deselectCard",this.card):this.$store.commit("selectCard",this.card)}},created:function(){var e={deck:{top:50,left:-40},common:{top:40,left:50},dealer:{top:10,left:50},dealerDeck:{top:10,left:-40},player:{top:70,left:50},playerDeck:{top:70,left:140}};window.outerWidth<500&&(this.positions=e)},data:function(){return{cardSelected:!1,positions:{deck:{top:50,left:10},common:{top:50,left:50},dealer:{top:20,left:50},dealerDeck:{top:20,left:20},player:{top:80,left:50},playerDeck:{top:80,left:80}}}},components:{}}),S=D,P=(n("e60d"),Object(h["a"])(S,_,T,!1,null,null,null));P.options.__file="Card.vue";var O=P.exports,x={name:"TheCards",computed:Object(s["a"])({},Object(l["b"])(["deck"])),components:{Card:O}},j=x,M=(n("dbf0"),Object(h["a"])(j,k,w,!1,null,null,null));M.options.__file="TheCards.vue";var $=M.exports,E=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"the-player-buttons",class:{mobile:e.isMobile},style:e.buttonStyle},[n("div",{staticClass:"buttons-group",class:{mobile:e.isMobile}},[n("button",{staticClass:"the-button",class:{mobile:e.isMobile},attrs:{disabled:!e.canMove||"player"!==e.turn},on:{click:e.play,dblclick:e.double}},[e._v("\n\t\t\t\tPLAY\n\t\t\t\t"),n("i",{staticClass:"far fa-thumbs-up button-icon"})]),n("button",{staticClass:"the-button",class:{mobile:e.isMobile},attrs:{disabled:"player"!==e.turn},on:{click:e.pass}},[e._v("\n\t\t\t\tPASS\n\t\t\t\t"),n("i",{staticClass:"far fa-dizzy button-icon"})])])]),n("div",{staticClass:"the-game-buttons",style:{bottom:"calc(50% - 15rem)",left:"calc(-20% - 4rem)"}},[n("div",{staticClass:"buttons-group"},[n("button",{staticClass:"the-button",on:{click:e.newRound}},[e._v("\n\t\t\t\tNEXT ROUND\n\t\t\t\t"),n("i",{staticClass:"far fa-share-square button-icon"})]),n("button",{staticClass:"the-button",on:{click:e.resetGame}},[e._v("\n\t\t\t\tRESET\n\t\t\t\t"),n("i",{staticClass:"far fa-star button-icon"})])])])])},G=[],I=(n("7514"),n("8afe")),V=(n("55dd"),n("ac6a"),function(){var e=N(W()),t=R(e),n=B(t);return n}),R=function(e){for(var t=e.slice(),n=t.length-1;n>=0;n--){var r=Math.floor(Math.random()*(n+1)),o=t[r];t[r]=t[n],t[n]=o}return t},W=function(){var e=[],t=[1,2,3,4,5,6,7,8,9,10],n=["sword","gold","heart","wood"];return t.forEach(function(t){n.forEach(function(n){e.push({value:t,suit:n})})}),e},N=function(e){return e.map(function(e){return Object(s["a"])({},e,{facedDown:!0})})},B=function(e){return e.map(function(e,t){return Object(s["a"])({index:t},e,{facedDown:!0,selected:!1,position:"deck",positionIndex:t,dealed:!1})}).reverse()},z=function(e,t){var n,r=function(e,t){return e+t.value},o=e.reduce(r,0);return t.forEach(function(e){e.value+o<5&&(n=e)}),n||t.forEach(function(e){o<15&&e.value+o>15&&(n=e)}),n||(n=q(t)),n},A=function(e,t){return 7===e.value&&"gold"===e.suit||7===e.value&&7!==t.value||"gold"===e.suit&&7!==t.value?1:7!==e.value||"gold"!==e.suit?-1:0},q=function(e){var t=e.sort(A);return t[0]},J=function(e){return JSON.parse(JSON.stringify(e))},F=function(e){for(var t=[],n={quantity:0,cards:[]},r=Math.pow(2,e.length),o=0;o<r;o++){n={quantity:0,cards:[]};for(var a=0;a<e.length;a++)o&Math.pow(2,a)&&(n.quantity+=e[a].value,n.cards.push(e[a]));0!==n.quantity&&t.push(n)}return t},L=function(e,t,n){for(var r=[],o=n.length+1,a=function(n){var a=15-e[n].value,s=t.filter(function(e){return e.quantity===a}),i=J(s),c=i.map(function(t,r){return t.cards.push(e[n]),t.broom=!1,t.goldSeven=!1,t.card=0,t.seven=0,t.gold=0,t.cards.forEach(function(e){t.moveValue="no_value",t.card++,7!==e.value&&"gold"===e.suit?(t.gold++,"seven"!==t.moveValue&&"seven_gold"!==t.moveValue&&(t.moveValue="gold")):7===e.value&&"gold"!==e.suit?(t.seven++,"seven_gold"!==t.moveValue&&(t.moveValue="seven")):7===e.value&&"gold"===e.suit&&(t.gold++,t.seven++,t.goldSeven=!0,t.moveValue="seven_gold"),t.cards.length===o&&(t.moveValue="broom")}),t});r.push.apply(r,Object(I["a"])(c))},s=0;s<e.length;s++)a(s);return r},Y=function(e,t){return"seven_gold"===e.moveValue&&"seven_gold"!==t.moveValue?-1:"seven"===e.moveValue&&"seven_gold"!==t.moveValue&&"seven"!==t.moveValue?-1:"seven"===e.moveValue&&"seven_gold"===t.moveValue?1:"gold"===e.moveValue&&"seven"!==t.moveValue&&"gold"!==t.moveValue&&"seven_gold"!==t.moveValue?-1:"gold"!==e.moveValue||"seven"!==t.moveValue&&"seven_gold"!==t.moveValue?"no_value"===e.moveValue&&"no_value"!==t.moveValue?1:e.cards.length>t.cards.length?-1:e.cards.length<t.cards.length?1:0:1},U=function(e){var t=e.find(function(e){return"broom"===e.moveValue});if(t)return[t];var n=e.sort(Y);return n},X=function(e,t){var n=F(t),r=L(e,n,t),o=U(r);return o[0]},H={name:"ThePlayButton",data:function(){return{positions:{player:{top:20,left:50}}}},computed:Object(s["a"])({},Object(l["b"])(["device","status","turn","deal","restart","playerCards","dealerCards","selectedCards","commonCards"]),{isMobile:function(){return"smartphone"===this.device},areCardsOnPlayers:function(){return this.playerCards.length+this.dealerCards.length},value:function(){var e=this.selectedCards.reduce(function(e,t){return e+t.value},0);return e},canMove:function(){var e=this.selectedCards.reduce(function(e,t){return e+t.value},0);return 15===e},buttonStyle:function(){return this.isMobile?{bottom:"0",left:"0"}:{bottom:"calc(20% - 4.4rem)",left:"calc(50% + 10rem)"}}}),watch:{turn:function(e){var t=this;"finished"!==this.status&&"dealer"===e&&setTimeout(function(){t.dealerPlay()},500)},status:function(e){"finished"===e&&this.$store.dispatch("showResults")}},methods:{double:function(){console.log("doubleclick")},play:function(){var e=function(e,t){return e+t.value},t=this.selectedCards.reduce(e,0);15===t?(this.$store.dispatch("correctPlay"),0===this.commonCards.length&&this.$store.commit("broom","player")):console.log("not 15")},pass:function(){var e=this.playerCards.find(function(e){return e.selected});this.$store.dispatch("pass",{player:"player",card:e})},dealerPlay:function(){var e=this,t=X(this.dealerCards,this.commonCards);t?this.$store.dispatch("dealerPlay",t.cards).then(function(){setTimeout(function(){e.$store.dispatch("correctPlay"),0===e.commonCards.length&&e.$store.commit("broom","dealer")},2e3)}):this.dealerPass()},dealerPass:function(){var e=this,t=z(this.commonCards,this.dealerCards);this.$store.commit("selectCard",t),setTimeout(function(){e.$store.dispatch("pass",{player:"dealer",card:t})},2e3)},resetGame:function(){this.$store.dispatch("resetGame")},newRound:function(){this.$store.dispatch("newRound")}}},K=H,Q=(n("bf9b"),Object(h["a"])(K,E,G,!1,null,null,null));Q.options.__file="ThePlayButton.vue";var Z=Q.exports,ee=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"menu-wrapper",class:{shadow:e.showMenu},on:{click:function(t){return t.stopPropagation(),e.show(t)}}},[n("i",{staticClass:"far fa-question-circle help-icon",on:{click:function(t){return t.stopPropagation(),e.show(t)}}}),n("transition",{attrs:{name:"menu"}},[e.showMenu?n("div",{staticClass:"menu",on:{click:function(t){t.stopPropagation(),e.show("inside")}}},[n("i",{staticClass:"fas fa-times close-icon",on:{click:function(t){return t.stopPropagation(),e.show(t)}}}),n("h1",[e._v("Start a new game")]),n("div",{staticClass:"buttons"},[n("button",{staticClass:"the-button",on:{click:function(t){e.newGame(15)}}},[e._v("\n                        15pt\n                    ")]),n("button",{staticClass:"the-button",on:{click:function(t){e.newGame(25)}}},[e._v("\n                        25pt\n                    ")]),n("button",{staticClass:"the-button",on:{click:function(t){e.newGame(40)}}},[e._v("\n                        40pt\n                    ")])]),n("h1",[e._v("Rules")]),n("div",{staticClass:"rules-content"},[n("p",[e._v("The game starts with 3 cards to each player and 4 common cards.")]),n("p",[e._v("The rules are simple. Just sum 15!")]),n("p",[e._v("To achieve that properly, you need to choose one of your cards and all cards you need from the common cards.")]),n("p",[e._v("Direct points:")]),n("ul",[n("li",[e._v("Broom: + 1 Point - You need to use all the common cards.")]),n("li",[e._v("Seven Gold: This is the best card. If you get this, you win 1 point.")])]),n("p",[e._v("Better cards:")]),n("ul",[n("li",[e._v("Sevens: If you get more 7s than the dealer, you'll win 1 point.")]),n("li",[e._v("Golds: This suit is better than the others. If you get more golden cards, you'll win 1 point.")]),n("li",[e._v("Cards: Simple, if you get more cards, you'll win 1 point.")])])]),n("div",{staticClass:"bottom"},[n("a",{attrs:{href:"https://github.com/juandiegombr/thebroom",target:"_blank"}},[n("i",{staticClass:"fab fa-github fa-left"}),e._v("Github repository")]),n("p",[e._v("Built with "),n("span",{staticClass:"text-vue"},[e._v("Vue")]),e._v(" by \n                        "),n("a",{attrs:{href:"https://www.linkedin.com/in/juandiego-martin/"}},[e._v("Juan Diego MartÃ­n")])]),n("p",[e._v("Powered by ServiceWorker "),n("i",{staticClass:"fas fa-cog"})])])]):e._e()])],1)},te=[],ne={name:"TheMenu",methods:{show:function(e){"inside"!==e&&(this.showMenu?this.showMenu=!1:this.showMenu=!this.showMenu)},newGame:function(e){console.log(e),this.$store.dispatch("resetGame",e),this.showMenu=!1}},data:function(){return{showMenu:!0}}},re=ne,oe=(n("bb78"),Object(h["a"])(re,ee,te,!1,null,null,null));oe.options.__file="Menu.vue";var ae=oe.exports,se=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("transition",{attrs:{name:"wrapper"}},["finished"===e.status?n("div",{staticClass:"message-wrapper"}):e._e()]),n("transition",{attrs:{name:"message"}},["finished"===e.status?n("div",{staticClass:"message-result",class:{smartphone:"smartphone"===e.device}},[e.isFinished?n("div",{staticClass:"finish-message"},["player"===e.winner?n("div",[n("i",{staticClass:"far fa-thumbs-up"}),e._v("\n          You won!\n        ")]):n("div",[n("i",{staticClass:"far fa-thumbs-down"}),e._v("\n          You lost!\n        ")])]):e._e(),n("div",{staticClass:"results-container"},[n("table",[n("tr",e._l(e.columns,function(t,r){return n("th",{key:r},[e._v(e._s(t))])})),e._l(e.rows,function(t,r){return n("tr",{key:r},e._l(t,function(t,r){return n("td",{key:r+10},[e._v(e._s(t))])}))})],2)]),n("div",{staticClass:"buttons",style:{gridTemplateColumns:e.isFinished?"1fr":"1fr 1fr"}},[n("button",{staticClass:"the-button",on:{click:e.newGame}},[e._v("\n\t\t\t\t\tSTART A NEW GAME\n\t\t\t\t")]),e.isFinished?e._e():n("button",{staticClass:"the-button",on:{click:e.newRound}},[e._v("\n\t\t\t\t\tNEXT ROUND\n        ")])])]):e._e()])],1)},ie=[],ce=(n("6b54"),{data:function(){return{show:!1,table:[["Player",1,2,3],["Dealer",1,2,3]]}},computed:Object(s["a"])({},Object(l["b"])(["results","round","status","device","gamePoints"]),{columns:function(){for(var e=["Round"],t=0;t<=this.round;t++)t===this.round?e.push("Total"):e.push(t+1);return e},rows:function(){for(var e=[["Player"],["Dealer"]],t=0;t<=this.results.player.length;t++)if(t===this.results.player.length){var n=this.results.player.reduce(function(e,t){return e+t},0);e[0].push(n)}else e[0].push(this.results.player[t]);for(var r=0;r<=this.results.dealer.length;r++)if(r===this.results.dealer.length){var o=this.results.dealer.reduce(function(e,t){return e+t});e[1].push(o)}else e[1].push(this.results.dealer[r]);return e},total:function(){return{player:this.results.player.reduce(function(e,t){return e+t}),dealer:this.results.dealer.reduce(function(e,t){return e+t})}},isFinished:function(){return this.total.player>=this.gamePoints||this.total.dealer>=this.gamePoints},winner:function(){var e;return this.isFinished&&(e=this.total.player>=this.gamePoints?"player":"dealer"),e}}),watch:{status:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){"finished"===status&&console.log("new results")})},methods:{timer:function(){this.show=!this.show},newRound:function(){this.$store.dispatch("newRound")},newGame:function(){this.$store.dispatch("resetGame")}},mounted:function(){}}),le=ce,ue=(n("8a18"),Object(h["a"])(le,se,ie,!1,null,null,null));ue.options.__file="Results.vue";var de=ue.exports,pe={name:"app",computed:Object(s["a"])({},Object(l["b"])(["status","turn","deal","deck","playerCards","dealerCards"]),{test:function(){return this.$store.state.restart},playersCards:function(){return this.playerCards.length+this.dealerCards.length}}),watch:{playersCards:function(e){e||this.test||"finished"===this.status||this.$store.dispatch("startDeal")},restart:function(e){console.log(e,this.playersCards)}},methods:{handleWindowResize:function(){return window.innerWidth<480?this.$store.commit("resize","smartphone"):window.innerWidth>=480&&window.innerWidth<768?this.$store.commit("resize","tablet"):window.innerWidth>=768&&this.$store.commit("resize","desktop"),this.screenSize},initServiceWorker:function(){"serviceWorker"in navigator?navigator.serviceWorker.register("/serviceworker.js").then(function(e){}):console.log("Your navigator is NOT prepared to use Service Workers")}},created:function(){this.initServiceWorker()},mounted:function(){window.addEventListener("resize",this.handleWindowResize),this.handleWindowResize(),this.$store.dispatch("startBroomGame")},components:{Menu:ae,TheCards:$,CardPositionMark:v,TheGameArea:g,ThePlayButton:Z,Results:de}},fe=pe,he=(n("5c0b"),Object(h["a"])(fe,o,a,!1,null,null,null));he.options.__file="App.vue";var me=he.exports;n("456d");r["a"].use(l["a"]);var ve={gamePoints:5,status:"playing",deck:[],playerCards:[],dealerCards:[],commonCards:[],selectedCards:[],playerCardsWinned:[],dealerCardsWinned:[],turn:"player",deal:0,restart:!1,round:1,results:{player:[0],dealer:[0]},device:null},ye=new l["a"].Store({state:JSON.parse(JSON.stringify(ve)),mutations:{resize:function(e,t){e.device=t},broom:function(e,t){var n=e.results[t];n[n.length-1]++},clearStateToNewGame:function(e,t){e.gamePoints=t||e.gamePoints,e.restart=!0,e.playerCards=[],e.dealerCards=[],e.commonCards=[],e.selectedCards=[],e.playerCardsWinned=[],e.dealerCardsWinned=[],e.turn="player",e.status="playing",e.deal=0,e.round=1,e.results={player:[0],dealer:[0]}},setTurn:function(e,t){e.turn=t},clearStateToNextRound:function(e){e.restart=!0,e.playerCards=[],e.dealerCards=[],e.commonCards=[],e.selectedCards=[],e.playerCardsWinned=[],e.dealerCardsWinned=[],e.status="playing",e.deal=0,e.round++,e.results.player.push(0),e.results.dealer.push(0)},cardsToDeck:function(e){var t=e.deck.map(function(e){return e.position="deck",e.positionIndex=0,e.facedDown=!0,e});e.deck=t},setNewDeck:function(e,t){e.deck=t},deal:function(e,t){var n={player:e.playerCards,dealer:e.dealerCards},r=e.deck.find(function(e){return!1===e.dealed});if("commonCard"===t)return r.facedDown=!1,r.player="common",r.position="common",r.positionIndex=e.commonCards.length,r.dealed=!0,void e.commonCards.push(r);"player"===t&&(r.facedDown=!1),r.player=t,r.position=t,r.positionIndex=n[t].length,r.dealed=!0,n[t].push(r),e.restart=!1},dealerSelectedCards:function(e,t){e.selectedCards=t;var n=t.filter(function(e){return"dealer"===e.player})[0],r=e.dealerCards,o=t.filter(function(e){return"common"===e.player}),a=e.commonCards;r.forEach(function(e,t){e.suit===n.suit&&e.value===n.value&&(r[t].selected=!0,r[t].facedDown=!1)}),o.forEach(function(e,t){a.forEach(function(t,n){e.suit===t.suit&&e.value===t.value&&(a[n].selected=!0)})})},selectCard:function(e,t){if(("common"===t.player||t.player===e.turn)&&!e.deck.find(function(e){return"common"!==t.player&&e.selected&&e.player===t.player})){var n=t.index;"dealer"===t.player&&(e.deck[39-n].facedDown=!1),e.selectedCards.push(t),e.deck[39-n].selected=!0}},deselectCard:function(e,t){var n=t.index;e.deck[39-n].selected=!1,e.selectedCards.some(function(n,r){n===t&&e.selectedCards.splice(r,1)})},removePlayedCard:function(e,t){var n=t.player,r=t.index,o=e.deck.filter(function(t){return t.position==="".concat(e.turn,"Deck")});e.deck[39-r].position="".concat(e.turn,"Deck"),e.deck[39-r].facedDown=!0,e.deck[39-r].selected=!1,e.deck[39-r].positionIndex=o.length;var a={dealer:e.dealerCards,player:e.playerCards,common:e.commonCards};a[n].forEach(function(e,r){e===t&&a[n].splice(r,1)}),a[n].filter(function(e){return"common"===e.player}).forEach(function(e,t){a[n][t].positionIndex=t})},resetSelectedCards:function(e){e.selectedCards=[],e.deck=e.deck.map(function(e){return e.selected=!1,e})},changeTurn:function(e){var t={player:"dealer",dealer:"player"};e.turn=t[e.turn],6!==e.deal||e.dealerCards.length||e.playerCards.length||(e.status="finished")},setCardToCommonCards:function(e,t){var n=t.player,r=t.card,o={player:e.playerCards,dealer:e.dealerCards},a=o[n].filter(function(e,t){return e===r&&o[n].splice(t,1),e!==r});e.deck.forEach(function(t,n){t===r&&(e.deck[n].facedDown=!1,e.deck[n].position="common",e.deck[n].positionIndex=e.commonCards.length,e.deck[n].player="common")}),o[n]=a,r.selected=!1,r.player="common",e.commonCards.push(r)},dealDid:function(e){6===e.deal?e.status="finished":e.deal++},setResults:function(e,t){var n=t.player,r=t.dealer,o=e.results.player,a=e.results.dealer;o[o.length-1]=o[o.length-1]+n,a[a.length-1]=a[a.length-1]+r}},actions:{resetGame:function(e,t){var n=e.commit,r=e.dispatch;n("clearStateToNewGame",t),n("cardsToDeck"),setTimeout(function(){r("startBroomGame")},1e3)},startBroomGame:function(e){var t=e.commit,n=e.dispatch,r=V();t("setNewDeck",r),n("startDeal")},startDeal:function(e){var t=e.commit,n=e.dispatch,r=e.state;if(6!==r.deal){var o=["player","dealer","player","dealer","player","dealer"];o.forEach(function(e,n){setTimeout(function(){t("deal",e)},10*n)}),0===r.deal&&setTimeout(function(){n("startDealCommonCards")},10*o.length-1),t("dealDid")}else r.status="finished"},startDealCommonCards:function(e){for(var t=e.commit,n=e.state,r=4,o=function(e){setTimeout(function(){if(t("deal","commonCard"),e===r-1){var o=n.round%2?"player":"dealer";t("setTurn",o)}},10*e)},a=0;a<r;a++)o(a)},correctPlay:function(e){var t=e.commit,n=e.state,r={player:n.playerCards,dealer:n.dealerCards},o=n.turn;n.selectedCards.forEach(function(e,a){for(var s=0;s<r[o].length;s++){var i=r[o][s];if(i.suit===e.suit&&i.value===e.value){t("removePlayedCard",i);break}}for(var c=0;c<n.commonCards.length;c++){var l=n.commonCards[c];l.suit===e.suit&&l.value===e.value&&t("removePlayedCard",l)}}),t("resetSelectedCards"),t("changeTurn")},pass:function(e,t){var n=e.commit,r=(e.state,t.player),o=t.card;n("setCardToCommonCards",{player:r,card:o}),n("resetSelectedCards"),n("changeTurn")},dealerPass:function(e,t){var n=e.commit,r=(e.state,t.player),o=t.card;n("setCardToCommonCards",{player:r,card:o}),n("resetSelectedCards"),n("changeTurn")},dealerPlay:function(e,t){var n=e.commit;return n("dealerSelectedCards",t),!0},showResults:function(e){var t=e.commit,n=e.state,r={player:0,dealer:0},o=function(e){return{cards:e.length,goldSeven:e.filter(function(e){return 7===e.value&&"gold"===e.suit}).length,seven:e.filter(function(e){return 7===e.value}).length,gold:e.filter(function(e){return"gold"===e.suit}).length}},a=n.deck.filter(function(e){return"playerDeck"===e.position}),s=n.deck.filter(function(e){return"dealerDeck"===e.position}),i=o(a),c=o(s);Object.keys(i).forEach(function(e){i[e]>c[e]?r.player++:i[e]<c[e]&&r.dealer++}),t("setResults",r)},newRound:function(e){var t=e.commit,n=e.dispatch;t("clearStateToNextRound"),t("cardsToDeck"),setTimeout(function(){n("startBroomGame")},1e3)}},getters:{commonCards:function(e){return e.deck.filter(function(e){return"common"===e.position})},dealerCards:function(e){return e.deck.filter(function(e){return"dealer"===e.position})},dealerWinnedrCards:function(e){return e.deck.filter(function(e){return"dealerDeck"===e.position})},playerCards:function(e){return e.deck.filter(function(e){return"player"===e.position})},playerWinnedCards:function(e){return e.deck.filter(function(e){return"playerDeck"===e.position})}}}),Ce=n("9483");Object(Ce["a"])("".concat("/thebroom/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},cached:function(){console.log("Content has been cached for offline use.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}}),r["a"].config.productionTip=!1,new r["a"]({store:ye,render:function(e){return e(me)}}).$mount("#app")},"5c0b":function(e,t,n){"use strict";var r=n("2856"),o=n.n(r);o.a},"693f":function(e,t,n){},8016:function(e,t,n){"use strict";var r=n("9b96"),o=n.n(r);o.a},"8a18":function(e,t,n){"use strict";var r=n("e241"),o=n.n(r);o.a},"9b96":function(e,t,n){},b05a:function(e,t,n){},bb78:function(e,t,n){"use strict";var r=n("02cc"),o=n.n(r);o.a},bf9b:function(e,t,n){"use strict";var r=n("4449"),o=n.n(r);o.a},dbf0:function(e,t,n){"use strict";var r=n("b05a"),o=n.n(r);o.a},e241:function(e,t,n){},e60d:function(e,t,n){"use strict";var r=n("693f"),o=n.n(r);o.a},ebde:function(e,t,n){}});
//# sourceMappingURL=app.053b997f.js.map